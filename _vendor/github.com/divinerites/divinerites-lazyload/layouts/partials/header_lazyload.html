{{- with site.Params.global.lazyload }}
   {{- if .enable }}
      {{- $isProd := hugo.IsProduction -}}
      {{- if .local }}
         {{- $js0 := resources.Get "js/intersection-observer.js" }}
         {{- $js1 := resources.Get "js/lazyload.min.js" }}
         {{- $js := slice $js0 $js1 | resources.Concat "js/concat_lazyload.js" }}
         {{- if $isProd }}
            {{- $js = $js | minify | fingerprint "sha384" }}
         {{- end }}
         <script src="{{ $js.RelPermalink }}" {{ if $isProd }}integrity="{{ $js.Data.Integrity }}"{{ end }}></script>
      {{- else }}
         <script src="https://cdn.jsdelivr.net/npm/intersection-observer@0.7.0/intersection-observer.js"></script>
         <script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@16.1.0/dist/lazyload.min.js"></script>
      {{- end }}
   {{- end }}
{{- end }}
